"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=(...t)=>{let n=!1;"boolean"==typeof t[0]&&(n=t.shift());let o=t[0];if(!o||"object"!=typeof o)throw new Error("extendee must be an object");const s=t.slice(1),l=s.length;for(let t=0;t<l;t++){const l=s[t];for(let t in l)if(l.hasOwnProperty(t)){const s=l[t];if(n&&(Array.isArray(s)||"object"==typeof(i=s)&&null!==i&&i.constructor===Object&&"[object Object]"===Object.prototype.toString.call(i))){const n=Array.isArray(s)?[]:{};o[t]=e(!0,o.hasOwnProperty(t)?o[t]:n,s)}else o[t]=s}}var i;return o},t=(e,t=window.ConsentControl.cookieName||"privacyconsent")=>{var o=n()||[];e=Array.isArray(e)?e:[e];for(var s=0;s<e.length;s++){var l=e[s];-1===o.indexOf(l)?o.push(l):o.splice(l,1)}var i=window.location.hostname,r=new Date;r.setTime(r.getTime()+31536e6);var c="expires="+r.toUTCString();document.cookie=t+"="+e.join("|")+";"+c+";path=/;samesite=lax;domain="+i},n=(e=window.ConsentControl.cookieName||"privacyconsent")=>{for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var s=n[o];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(t))return s.substring(t.length,s.length).split("|")}return!1},o={cookieName:"consentcontrol",parentEl:null,template:{strings:{mainTitle:"Cookies & Dienste",mainDescription:'Diese Webseite nutzt Cookies und externe Dienste.<br /><a\n         href="/datenschutz/">Datenschutzbestimmungen</a> <a href="/impressum/">Impressum</a>',settingsButtonLabel:"Weitere Informationen",resetButtonLabel:"Alle Cookies löschen",resetMessage:"Alle Cookies wurden erfolgreich gelöscht.",closeButtonLabel:"Schließen",okButtonLabel:"OK",allButtonLabel:"Alle erlauben"},main:function(){return'<div id="consent-control-banner" class="is-collapsed" aria-modal="true" aria-hidden="true" aria-label="{mainTitle}">\n         </div>'.replace(/{\w+}/g,(e=>this.strings[e.substring(1,e.length-1)]||e))},headerEl:"header",header:function(){return'<h3>{mainTitle}</h3>\n         <p>{mainDescription}</p>\n         <button class="collapsed-only consent-control--open">{settingsButtonLabel}</button>'.replace(/{\w+}/g,(e=>this.strings[e.substring(1,e.length-1)]||e))},switches:function(){return'<div class="switches"></div>'},switch:function(e,t){return'<div class="form-check form-switch">\n          <input id="consent-{key}" value="{key}" class="form-check-input" type="checkbox" role="switch">\n          <label for="consent-{key}" class="form-check-label">{label}</label>\n        </div>'.replace(/{\w+}/g,(e=>t[e.substring(1,e.length-1)]||e)).replace(/{\w+}/g,(t=>"{key}"==t?e:t))},switchChild:function(e){return"<li>\n            <h4>{label}</h4>\n          </li>".replace(/{\w+}/g,(t=>e[t.substring(1,t.length-1)]||t))},footer:function(){return'\n         <div class="uncollapsed-only">\n             <button class="consent-control--reset">{resetButtonLabel}</button>\n         </div>\n         <div class="control">\n             <button class="secondary uncollapsed-only consent-control--close">{closeButtonLabel}</button>\n             <button id="consent-control--submit">{okButtonLabel}</button>\n             <button id="consent-control--submit-all">{allButtonLabel}</button>\n         </div>'.replace(/{\w+}/g,(e=>this.strings[e.substring(1,e.length-1)]||e))}},switches:{necessary:{disabled:!0,checked:!0,label:"Notwendige",description:"Stellt die Funktionalität der Website sicher.",childs:[{label:"Seiten-Einstellungen",description:"Speichert Ihre Einstellungen in diesem Banner, Cookie\n            <strong>consentbanner</strong> Speicherdauer 1 Jahr"},{label:"Schriftarten",description:'Lädt die Schriftart "Eurostile" von externen Servern von Adobe Fonts / Typekit'}]},analytics:{label:"Analytics",description:"Erlauben Sie dem Website-Betreiber, das Angebot auf dieser Webseite zu bewerten und zu verbessern.",childs:[{label:"Google Tag Manager",description:"'UA-105811621-1, Cookie <strong>_ga</strong> Speicherdauer 2 Jahre"}]},functional:{label:"Funktionell",description:"Funktionen für die Darstellung der Inhalte.",childs:[{label:"Google Maps",description:"Stellt eine Karte mit Routenbeschreibung zur Verfügung und lädt diese von externen Servern von Google."}]}}};window.ConsentControl={};const s=window.ConsentControl;function l(){const e=n();s.El=document.getElementById("#consent-control-banner"),s.status.includes("initialized")||(s.El=i()),s.status.includes("events")||r(),e.length&&e.forEach((function(e){s.El.querySelectorAll("input[value="+e+"]").forEach((e=>{e.checked=!0}))})),s.El.classList.remove("hide")}const i=()=>{const e=s.options.parentEl||document.body;let t=e.querySelector("#consent-control-banner");t||(e.insertAdjacentHTML("beforeend",s.options.template.main()),t=e.querySelector("#consent-control-banner")),s.options.animated&&t.classList.add("is-animated"),s.options.hideOnScroll&&t.classList.add("hide-on-scroll");let n=t.querySelector(".consent-control--open");if(!n){const e=document.createElement(s.options.template.headerEl);e.innerHTML=s.options.template.header(),t.appendChild(e),n=e.querySelector(".consent-control--open")}let o=t.querySelector(".switches");if(!o){t.insertAdjacentHTML("beforeend",s.options.template.switches()),o=t.querySelector(".switches");for(const[e,t]of Object.entries(s.options.switches)){o.insertAdjacentHTML("beforeend",s.options.template.switch(e,t));const n=o.lastElementChild;if(t.description){const e=document.createElement("p");e.classList.add("description"),e.innerHTML=t.description,n.appendChild(e)}const l=n.querySelector("input");if(t.disabled&&l.setAttribute("disabled","disabled"),t.checked&&l.setAttribute("checked","checked"),t.childs){const e=document.createElement("ul");e.classList.add("childs"),n.appendChild(e);for(const[n,o]of Object.entries(t.childs)){e.insertAdjacentHTML("beforeend",s.options.template.switchChild(o));const t=e.lastElementChild;if(o.description){const e=document.createElement("p");e.classList.add("description"),e.innerHTML=o.description,t.appendChild(e)}}}}}let l=t.querySelector("#consent-control--submit");return l||(t.insertAdjacentHTML("beforeend",s.options.template.footer()),l=t.querySelector("#consent-control--submit")),document.documentElement.classList.add("with-consentControl"),s.status.push("initialized"),t},r=()=>{s.El.querySelector("#consent-control--submit").addEventListener("click",(e=>{e.preventDefault();const n=[];s.El.querySelectorAll("input").forEach((e=>{e.checked&&n.push(e.value)})),t(n),s.El.classList.add("hide","is-collapsed"),c()})),s.El.querySelector("#consent-control--submit-all").addEventListener("click",(e=>{e.preventDefault();const n=[];s.El.querySelectorAll("input").forEach((e=>{n.push(e.value)})),t(n),s.El.classList.add("hide","is-collapsed"),c()})),s.El.querySelectorAll(".consent-control--close").forEach((function(e){e.addEventListener("click",(e=>{e.preventDefault(),s.El.classList.add("is-collapsed")}))})),s.El.querySelectorAll(".consent-control--open").forEach((function(e){e.addEventListener("click",(e=>{e.preventDefault(),s.El.classList.remove("is-collapsed")}))})),s.El.querySelectorAll(".consent-control--reset").forEach((function(e){e.addEventListener("click",(e=>{e.preventDefault(),deleteAllCookies()}))}))};function c(){const e=n();e&&(console.log(e),e.includes("necessary")&&"function"==typeof consentnecessary&&consentnecessary(),e.includes("analytics")&&"function"==typeof consentanalytics&&consentanalytics(),e.includes("functional")&&"function"==typeof initMaps&&initMaps())}exports.ConsentControl=(t={})=>{s.options=e(!0,o,t),s.status=[];n()||((()=>{const e=document.querySelectorAll(".consent-control--open");if(!e||e.length<1)return!1;e.array.forEach((e=>{e.style.display="none"}))})(),l()),c(),window.ConsentControl.show=l()};
